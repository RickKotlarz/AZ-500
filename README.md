

# Study Guide for Exam AZ-500: Microsoft Azure Security Technologies
Updated June 2022

## Manage identity and access (30-35%)
### Manage Azure Active Directory identities
| Term | Description |
|---|---|
| [Azure Active Directory (AD)](https://docs.microsoft.com/en-us/learn/modules/manage-users-and-groups-in-aad/2-create-aad) | **Directories, subscriptions, and users** - Microsoft offers several cloud-based offerings today - all of which can use Azure AD to identify users and control access. When a company or organization signs up to use one of these offerings, they are assigned a default  ***directory***, an instance of Azure AD. This directory holds the users and groups that will have access to each of the services the company has purchased. This default directory can be referred to as a  ***tenant***. A tenant represents the organization and the default directory assigned to it.<br/> <br/> ***Subscriptions***  in Azure are both a billing entity and a security boundary. Resources such as virtual machines, websites, and databases are associated with a single subscription. Each subscription also has a single account  ***owner***  responsible for any charges incurred by resources in that subscription. If your organization wants a subscription billed to another account, you can transfer the subscription. A subscription is associated with a  **single Azure AD directory**. Multiple subscriptions can trust the same directory, but a subscription can only trust one directory. <br/> <br/> Users and groups can be added to multiple subscriptions - this allows the user to create, control, and access resources in the subscription. When you add a user to a subscription, the user must be known to the associated directory as shown in the following image. <br/> ![Conceptual art showing users, directories, and subscriptions in Azure.](https://docs.microsoft.com/en-us/learn/modules/manage-users-and-groups-in-aad/media/2-users-subs-and-directories.png)<br/> If you belong to multiple directories, you can switch the current directory you are working in through the  **Directory + subscription**  button in the Azure portal header.<br/> ![Screenshot showing the Directory selection dialog in Azure portal.](https://docs.microsoft.com/en-us/learn/modules/manage-users-and-groups-in-aad/media/2-directory-and-subscription.png)<br/> You can also decide how the default directory is selected: last visited or a specific directory. You can also set the default filter for displayed subscriptions. Default filters are useful if you have access to several subscriptions but typically only work in a few of them.|
| [Built-in Azure AD roles](https://docs.microsoft.com/en-us/learn/modules/manage-users-and-groups-in-aad/5-manage-aad-roles) | Azure AD provides several  _built-in roles_  to cover the most common security scenarios. To understand how the roles work, let's examine three roles that apply to all resource types:<br/><br/>&bull; **Owner**, which has full access to all resources, including the right to delegate access to others.<br/>&bull; **Contributor**, which can create and manage all types of Azure resources but can’t grant access to others.<br/> &bull; **Reader**, which can view existing Azure resources. <br/><br/> Each role is a set of properties defined in a JavaScript Object Notation (JSON) file. This role definition includes a  **Name**,  **ID**, and  **Description**. It also includes the allowable permissions (**Actions**), denied permissions (**NotActions**), and scope (for example, read access) for the role. For the Owner role, that means all actions, indicated by an asterisk (*); no denied actions; and all scopes, indicated by a forward slash (/).<br/><br/>A role definition is a collection of permissions. A **role definition** lists the operations that can be performed, such as read, write, and delete. It can also list the operations that can't be performed or operations related to underlying data and has the following structure.<br/>**Id** = Unique identifier for the role, assigned by Azure.<br/>**IsCustom** = True if a custom role, False if a built-in role.<br/>**Description** = A readable description of the role.<br/>**Actions []** = Allowed permissions, * indicates all.<br/>**NotActions []** = Denied permissions.<br/>**DataActions []** = Specific allowed permissions as applied to data, for example: _Microsoft.Storage/storageAccounts/blobServices/containers/blobs/read_<br/>**NotDataActions []** = Specific denied permissions as applied to data.<br/>**AssignableScopes []** = Scopes where this role applies. / indicates global, but can reach into a hierarchical tree.|
| [Azure AD users](https://docs.microsoft.com/en-us/learn/modules/manage-users-and-groups-in-aad/3-users) | Typically, Azure AD defines users in three ways: <br/>**1 - Cloud identities**  - These users exist only in Azure AD. Examples are administrator accounts and users that you manage yourself. Their source is  **Azure Active Directory**  or  **External Azure Active Directory**  if the user is defined in another Azure AD instance but needs access to subscription resources controlled by this directory. When these accounts are removed from the primary directory, they are deleted. <br/> **2 - Directory-synchronized identities**  - These users exist in an on-premises Active Directory. A synchronization activity that occurs via  **Azure AD Connect**  brings these users in to Azure. Their source is  **Windows Server AD**. <br/> **3 - Guest users**  - These users exist outside Azure. Examples are accounts from other cloud providers and Microsoft accounts, such as an Xbox LIVE account. Their source is  **Invited user**. This type of account is useful when external vendors or contractors need access to your Azure resources. Once their help is no longer necessary, you can remove the account and all of their access.<br/><br/>You can add cloud identities to Azure AD in multiple ways:<br/> <br/> &bull; Syncing an on-premises Windows Server Active Directory <br/> &bull; Using the Azure portal <br/> &bull; Using the command line<br/><br/> **Azure AD Connect** is a separate service that allows you to synchronize a traditional Active Directory with your Azure AD instance. This is how most enterprise customers add users to the directory. The advantage to this approach is users can use single sign-on (SSO) to access local and cloud-based resources.|
| [Group and membership](https://docs.microsoft.com/en-us/learn/modules/manage-users-and-groups-in-aad/4-groups) | An Azure AD group helps organize users making it easier to manage permissions. Using groups lets the resource owner (or Azure AD directory owner), assign a set of access permissions to all the members of the group, instead of having to provide the rights one-by-one. Groups allow us to define a security boundary and then add and remove specific users to grant or deny access with a minimum amount of effort. Even better, Azure AD supports the ability to define membership based on rules - such as what department a user works in, or the job title they have.  <br/><br/>Azure AD allows you to define two different types of groups.<br/>**1 - Security groups**. These are the most common and are used to manage member and computer access to shared resources for a group of users. For example, you can create a security group for a specific security policy. By doing it this way, you can give a set of permissions to all the members at once, instead of having to add permissions to each member individually. This option requires an Azure AD administrator.<br/>**2 - Microsoft 365 groups**. These groups provide collaboration opportunities by giving members access to a shared mailbox, calendar, files, SharePoint site, and more. This option also lets you give people outside of your organization access to the group. This option is available to users as well as admins. <br/><br/> ![Screenshot of the Create Group feature in the Azure portal.](https://docs.microsoft.com/en-us/learn/modules/manage-users-and-groups-in-aad/media/4-add-group-portal.png)<br/>Group "membership type" can be of the following 3 types:<br/>1.  **Assigned (static)**. The group will contain specific users or groups that you select.<br/>2.  **Dynamic user**. You create rules based on characteristics to enable attribute-based dynamic memberships for groups. For example, if a user’s department is Sales, that user will be dynamically assigned to the Sales group. Security groups can be used for either devices or users, but Microsoft 365 Groups can be only used for user groups. If the user's department changes in the future, they are automatically removed from the group. This feature requires an Azure AD Premium P1 license. <br/>3.  **Dynamic device**. You create rules based on characteristics to enable attribute-based dynamic memberships for groups. For example, if a user’s device is associated with the Service department, that device will be dynamically assigned to the Service group. Security groups can be used for either devices or users, but Microsoft 365 Groups can be only used for user groups. If the device's association with a particular department changes in the future, it is automatically removed from the group. This feature requires an Azure AD Premium P1 license.|
| [Administrative Units in Azure AD](https://docs.microsoft.com/en-us/azure/active-directory/roles/administrative-units) | An administrative unit is an Azure AD resource that can be a container for other Azure AD resources. **An administrative unit can contain only users, groups, or devices.** Administrative units restrict permissions in a role to any portion of your organization that you define.  <br/><br/> For example, a large university that's made up of many autonomous schools (School of Business, School of Engineering, and so on). Each school has a team of IT admins who control access, manage users, and set policies for their school.<br/> <br/>A central administrator could: <br/>-   Create an administrative unit for the School of Business.<br/>-   Populate the administrative unit with only students and staff within the School of Business.<br/>-   Create a role with administrative permissions over only Azure AD users in the School of Business administrative unit.<br/>-   Add the business school IT team to the role, along with its scope.<br/><br/>![Screenshot of Devices and Administrative units page with Remove from administrative unit option.](https://docs.microsoft.com/en-us/azure/active-directory/roles/media/administrative-units/admin-unit-overview.png)|
| [Authentication options decision tree](https://docs.microsoft.com/en-us/azure/active-directory/hybrid/choose-ad-authn) | Identity is the new control plane of IT security, so authentication is an organization’s access guard to the new cloud world. Organizations need an identity control plane that strengthens their security and keeps their cloud apps safe from intruders. <br/>![Azure AD authentication decision tree](https://docs.microsoft.com/en-us/azure/active-directory/hybrid/media/choose-ad-authn/azure-ad-authn-image1.png)<br/>Details on decision questions:<br/> **1.** Azure AD can handle sign-in for users without relying on on-premises components to verify passwords.<br/> **2.** Azure AD can hand off user sign-in to a trusted authentication provider such as Microsoft’s AD FS.<br/>**3.** If you need to apply, user-level Active Directory security policies such as account expired, disabled account, password expired, account locked out, and sign-in hours on each user sign-in, Azure AD requires some on-premises components.<br/> **4.**  Sign-in features not natively supported by Azure AD:<br/> &emsp; - Sign-in using smartcards or certificates.<br/> &emsp; - Sign-in using on-premises MFA Server.<br/> &emsp; - Sign-in using third-party authentication solution.<br/> &emsp; - Multi-site on-premises authentication solution.<br/> **5.** Azure AD Identity Protection requires Password Hash Sync regardless of which sign-in method you choose, to provide the  _Users with leaked credentials_  report. Organizations can fail over to Password Hash Sync if their primary sign-in method fails and it was configured before the failure event. |
| [Hybrid identity](https://docs.microsoft.com/en-us/learn/modules/implement-manage-hybrid-identity/) | Hybrid identity referes to an identity solution that allows users both on-premises and in the cloud to authenticate using a single common user identity. <br/><br/> **Three hybrid authentication models exist within Azure:**<br/> **[Password hash synchronization (PHS)](https://docs.microsoft.com/en-us/learn/modules/implement-manage-hybrid-identity/3-password-hash-synchronization)** - Password hash synchronization is one of the sign-in methods used to accomplish hybrid identity. Azure AD Connect synchronizes a hash, of the hash, of a user's password from an on-premises Active Directory instance to a cloud-based Azure AD instance. <br/> **[Pass-through authentication (PTA)](https://docs.microsoft.com/en-us/learn/modules/implement-manage-hybrid-identity/4-pass-through-authentication)** - Azure Active Directory (Azure AD) pass-through authentication allows your users to sign in to both on-premises and cloud-based applications by using the same passwords. Pass-through authentication signs users in by validating their passwords directly against on-premises Active Directory. <br/> **[Federated authentication](https://docs.microsoft.com/en-us/learn/modules/implement-manage-hybrid-identity/6-federation)** - Federation is a collection of domains that have established trust. The level of trust may vary, but typically includes authentication and almost always includes authorization. <br/><br/> ***Azure AD Connect provides a simplified method to enable these hybrid solutions and allow users to log into Azure AD resources using their on-premises password.*** || [Password hash synchronization (PHS)](https://docs.microsoft.com/en-us/azure/active-directory/hybrid/whatis-phs) | **Effort**: Password hash synchronization requires the least effort regarding deployment, maintenance, and infrastructure. This level of effort typically applies to organizations that only need their users to sign in to Microsoft 365, SaaS apps, and other Azure AD-based resources. When turned on, password hash synchronization is part of the Azure AD Connect sync process and runs every two minutes.<br/>**User experience**: To improve users' sign-in experience, deploy seamless SSO with password hash synchronization. Seamless SSO eliminates unnecessary prompts when users are signed in. <br/> **Advanced scenarios**: If organizations choose to, it's possible to use insights from identities with Azure AD Identity Protection reports with Azure AD Premium P2. An example is the leaked credentials report. Windows Hello for Business has [specific requirements when you use password hash synchronization](https://docs.microsoft.com/en-us/windows/access-protection/hello-for-business/hello-identity-verification).  [Azure AD Domain Services](https://docs.microsoft.com/en-us/azure/active-directory-domain-services/tutorial-create-instance)  requires password hash synchronization to provision users with their corporate credentials in the managed domain.<br/><br/> ***Organizations that require multi-factor authentication with password hash synchronization must use Azure AD Multi-Factor Authentication or  [Conditional Access custom controls](https://docs.microsoft.com/en-us/azure/active-directory/conditional-access/controls#custom-controls-preview).*** Those organizations can't use third-party or on-premises multifactor authentication methods that rely on federation. <br/><br/>-   **Business continuity**. Using password hash synchronization with cloud authentication is highly available as a cloud service that scales to all Microsoft datacenters. To make sure password hash synchronization does not go down for extended periods, deploy a second Azure AD Connect server in staging mode in a standby configuration. <br/>-   **Considerations**. Currently, password hash synchronization doesn't immediately enforce changes in on-premises account states. In this situation, a user has access to cloud apps until the user account state is synchronized to Azure AD. Organizations might want to overcome this limitation by running a new synchronization cycle after administrators do bulk updates to on-premises user account states. An example is disabling accounts.<br/> <br/> Optionally, you can set up password hash synchronization as a backup if you decide to use  [Federation with Active Directory Federation Services (AD FS)](https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-fed-whatis)  as your sign-in method.|
 [Different external identity types](https://docs.microsoft.com/en-us/azure/active-directory/external-identities/) (Guest Users) | With External Identities in Azure AD, you can allow people outside your organization to access your apps and resources, while letting them sign in using whatever identity they prefer. Within this framework, Azure AD supports a variety of scenarios from business-to-business (B2B) collaboration to access management for consumer/customer- or citizen-facing applications (business-to-customer, or B2C). ***Azure AD External Identities focuses less on a user's relationship to your organization and more on how the user wants to sign in to your apps and resources.*** <br/> [John Saville YouTube](https://www.youtube.com/watch?v=9P10hgPDRZg)|
[What is a device identity?](https://docs.microsoft.com/en-us/azure/active-directory/devices/overview) | A device identity is an object in Azure Active Directory (Azure AD). This device object is similar to users, groups, or applications. A device identity gives administrators information they can use when making access or configuration decisions. <br/> <br/>There are three ways to get a device identity: <br/> &bull; Azure AD registration  <br/> &bull; Azure AD join  <br/> &bull; Hybrid Azure AD join <br/>  <br/>Device identities are a prerequisite for scenarios like device-based Conditional Access policies and Mobile Device Management with Microsoft Endpoint Manager.|
| [Enable password hash synchronization](https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-password-hash-synchronization) | **To use password hash synchronization (PHS) in your environment, you need to:**<br/> - Install Azure AD Connect. <br/> - Configure directory synchronization between your on-premises Active Directory instance and your Azure Active Directory instance. <br/> - Enable password hash synchronization. |
| [Passwordless](https://docs.microsoft.com/en-us/azure/active-directory/authentication/howto-authentication-passwordless-deployment) | Microsoft offers the following  [three passwordless authentication options](https://docs.microsoft.com/en-us/azure/active-directory/authentication/concept-authentication-passwordless)  that integrate with Azure Active Directory (Azure AD):<br/>1 - [Microsoft Authenticator app](https://docs.microsoft.com/en-us/azure/active-directory/authentication/concept-authentication-passwordless#microsoft-authenticator-app)  - turns any iOS or Android phone into a strong, passwordless credential by allowing users to sign into any platform or browser.<br/> 2- [FIDO2-compliant security keys](https://docs.microsoft.com/en-us/azure/active-directory/authentication/concept-authentication-passwordless#fido2-security-keys)  - useful for users who sign in to shared machines like kiosks, in situations where use of phones is restricted, and for highly privileged identities. <br/> 3 - [Windows Hello for Business](https://docs.microsoft.com/en-us/azure/active-directory/authentication/concept-authentication-passwordless#windows-hello-for-business)  - best for users on their dedicated Windows computers.
| [Passwordless Phone](https://docs.microsoft.com/en-us/azure/active-directory/authentication/howto-authentication-passwordless-phone) | <-- How to guide on enabling passwordless sign-in with the Microsoft Authenticator app |
| [Passwordless Security Key](https://docs.microsoft.com/en-us/azure/active-directory/authentication/howto-authentication-passwordless-security-key) | <-- How to guide on enabling passwordless security key sign-in|
| [Passwordless Launch Blog](https://techcommunity.microsoft.com/t5/azure-active-directory-identity/passwordless-authentication-is-now-generally-available/ba-p/1994700) | Misc information and visuals on the launch of passwordless logon|
| [Microsoft Identity Platform ](https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-overview) | The Microsoft identity platform helps you build applications your users and customers can sign in to using their Microsoft identities or social accounts, and provide authorized access to your own APIs or Microsoft APIs like Microsoft Graph.<br/> There are several components that make up the Microsoft identity platform:<br/>&bull; **OAuth 2.0 and OpenID Connect standard-compliant authentication service**  enabling developers to authenticate several identity types, including: <br/> &emsp;&bull; Work or school accounts, provisioned through Azure AD <br/> &emsp;&bull; Personal Microsoft account, like Skype, Xbox, and Outlook.com <br/> &emsp;&bull; Social or local accounts, by using Azure AD B2C <br/> &bull; **Open-source libraries**: Microsoft Authentication Libraries (MSAL) and support for other standards-compliant libraries <br/> &bull; **Application management portal**: A registration and configuration experience in the Azure portal, along with the other Azure management capabilities. <br/> &bull; **Application configuration API and PowerShell**: Programmatic configuration of your applications through the Microsoft Graph API and PowerShell so you can automate your DevOps tasks. <br/> &bull; **Developer content**: Technical documentation including quickstarts, tutorials, how-to guides, and code samples. <br/><br/> For developers, the Microsoft identity platform offers integration of modern innovations in the identity and security space like passwordless authentication, step-up authentication, and Conditional Access. You don’t need to implement such functionality yourself: applications integrated with the Microsoft identity platform natively take advantage of such innovations. <br> ![Metro map showing several application scenarios in Microsoft identity platform](https://docs.microsoft.com/en-us/azure/active-directory/develop/media/v2-overview/application-scenarios-identity-platform.png)
| [Azure AD pricing ](https://azure.microsoft.com/en-us/pricing/details/active-directory/) | **Free** = This provides user and group management in Azure and provides on-premeis directory synchronization, basic reports and self-service password changes for cloud users. <br/><br/> **Premium P1** ($6/user/mo) = Designed to empower organizations with more demanding identity and access management needs, Azure Active Directory Premium edition adds feature-rich enterprise-level identity management capabilities and enables hybrid users to seamlessly access on-premises and cloud capabilities (dynamic groups, cloud write-back, and self-service password reset for on-premesis users). This edition includes everything you need for information worker and identity administrators in hybrid environments across application access, self-service identity and access management (IAM), and security in the cloud. <br/> <br/> **Premium P2** ($9/user/mo) = Azure Active Directory Premium P2 includes every feature of all other Azure Active Directory editions enhanced with Advanced Identity Protection (AIP) and Privileged Identity Management (PIM) capabilities. <br/><br/> Feature comparisons for each tier located on  [Active Directory documentation](https://docs.microsoft.com/en-us/azure/active-directory/authentication/concept-mfa-licensing#available-versions-of-azure-ad-multi-factor-authentication).|

### Configure secure access by using Azure AD

| Term | Description |
|---|---|
| [Privileged Identity Management (PIM) ](https://docs.microsoft.com/en-us/learn/modules/azure-ad-privileged-identity-management/) | Privileged Identity Management (PIM) is a service in Azure Active Directory (Azure AD) that enables you to manage, control, and monitor access to important resources in your organization. These resources include resources in Azure AD, Azure, and other Microsoft Online Services such as Microsoft 365 or Microsoft Intune. <br/><br/>  ***PIM Capabilities*** <br/> &bull; Just-In-Time (JIT) priveleged access to Azure AD and Azure resource <br/> &bull; You can assign time-bound access to resources using start and end dates (useful for guests/contractors)<br/> &bull; Require approval to activate privileged roles <br/> &bull; Enforcement of MFA to activate role <br/> &bull; Text box for user justification on their need to access a resources, which assists with internal / external audits. (This may also include a ITSM ticket number.) <br/> &bull; Automated notifications (alert / SOC team) <br/> &bull; Downloadable audit history for internal / external audits.<br/> &bull; Prevents removal of the last active Global Administrator role assignment <br/> &bull; Access Reviews - Create access reviews to determine whether a users still needs access. This is sometimes referred to as an attestation campaign and can be delegated to groups or users to perform. Access reviews can also be automated to fail secure and remove access. <br/> <br/> PIM works with all built in and custom Azure AD Roles and Azure Resource Roles and is a **CLOUD ONLY** identity management solution. <br/><br/> [Capabilities of Privileged Identity Management (PIM)](https://docs.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-configure) |
| [Getting started in PIM](https://docs.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-getting-started) | :computer:	Read the referenced URL for additional information :computer: <br/><br/> ***Licensing Prerequisites*** <br/>To use Privileged Identity Management, you must have one of the following licenses: <br/> &bull; Azure AD Premium P2 <br/> &bull; Enterprise Mobility + Security (EMS) E5 <br/> <br/> ***Permissions***  <br/> &bull; Global administrators and Privileged Role administrators can create reviews on role-assignable groups. <br/> &bull; (Preview) Microsoft 365 and Security group owner.  |
| [PIM configuration settings ](https://docs.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-how-to-change-default-settings) | :computer:	Read the referenced URL for additional information :computer: <br/><br/>For Assignment duration you can choose ***ONE*** eligible assignment duration and ***ONE*** active assignment duration <br/><br/> ***Eligible assignment duration options:*** <br/> 1 - Allow permanent eligible assignment = Global admins and Privileged role admins can assign permanent eligible assignment. <br/> 2 - Expire eligible assignment after = Global admins and Privileged role admins can require that all eligible assignments have a specified start and end date.<br/><br/> ***Active assignment duration options:*** <br/> 1 - Allow permanent active assignment = Global admins and Privileged role admins can assign permanent active assignment. <br/> 2 - Expire active assignment after = Global admins and Privileged role admins can require that all active assignments have a specified start and end date. <br/><br/>Note: All assignments that have a specified end date can be renewed by Global admins and Privileged role admins. Also, users can initiate self-service requests to extend or renew role assignments. <br/> <br/>Additional options confugrations include: <br/> &emsp; &bull; Require multifactor authentication - On activation <br/> &emsp; &bull; Require multifactor authentication - On active assignment <br/> &emsp; &bull; Activation maximum duration <br/> &emsp; &bull; Require justification <br/> &emsp; &bull; Require ticket information on activation <br/> &emsp; &bull; Require approval to activate <br/> &emsp; &bull; Notifications |
| [Assign Azure AD roles in PIM ](https://docs.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-how-to-add-role-to-user) | :computer: Read the referenced URL for additional information :computer:  <br/><br/> Azure Portal >> Privileged Identity Management >> Manage: Azure AD Roles |
| [Activate and configure PIM - demo ](https://docs.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-how-to-add-role-to-user) | :computer:	Read the referenced URL for additional information :computer: <br/> <br/> Azure Portal >> Privileged Identity Management <br/> <br/> ***Update:***<br/> If a user who is logged in as a Global Admin or sufficiently privileged role in an Azure AD organization with a Premium P2 license goes to Roles and administrators in Azure AD and just visits Privileged Identity Management:<br/>1 -  PIM is automatically enabled for the organization  <br/> 2 - Their experience is now that they can either assign a "regular" role assignment or an eligible role assignment <br/> <br/>  When PIM is enabled it doesn't have any other effect on your organization that you need to worry about. It gives you additional assignment options such as active vs eligible with start and end time. PIM also enables you to define scope for role assignments using Administrative Units and custom roles. If you are a Global Administrator or Privileged Role Administrator, you might start getting a few additional emails like the PIM weekly digest. You might also see MS-PIM service principal in the audit log related to role assignment. This is an expected change that should have no effect on your workflow.  <br/><br/> Note that when selecting "Azure Resources" under "Management", you're not delegating Azure AD roles, but rather delegating roles associated with your Azure resources. |
| [Conditional Access](https://docs.microsoft.com/en-us/learn/modules/explore-access-management-capabilities/2-describe-conditional-access-its-benefits) | Conditional Access is a feature of Azure AD that provides an extra layer of security before allowing authenticated users to access data or other assets. Conditional Access is implemented through policies that are created and managed in Azure AD. A Conditional Access policy analyses signals including user, location, device, application, and risk to automate decisions for authorizing access to resources (apps and data). [What is Conditional Access?](https://docs.microsoft.com/en-us/azure/active-directory/conditional-access/overview) <br/> <br/> You can also provide acces to users based on signals available when creating the CA policy.<br/> ***Common signals include:*** <br/> &bull; User or group membership = Will only apply policies to certain users and groups <br/> &bull; IP location = Block or allow access from certain IP addresses <br/> &bull; Device = Block or allow access based on how the device is managed <br/> &bull; Real-time and calculated risk detection - Azure Identity Protection can be used to identiy the sign-in risk behavior. The policy can then be used to block or allow access based on risk severity. |
| [Uses and benefits of conditional access](https://docs.microsoft.com/en-us/azure/active-directory/conditional-access/plan-conditional-access) | When the Conditional Access policy has been applied, an informed decision is reached on whether to grant access, block access, or require extra verification. The decision is referred to as the access controls portion of the Conditional Access policy and defines how a policy is enforced. Common decisions <br/> &bull;  Block access<br/>  &nbsp;&nbsp;&nbsp;&nbsp;  &bull;  Most restrictive decision<br/>  &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;    &bull;   Grant access <br/>  &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &bull;   Least restrictive decision, can still require one or more of the following options: <br/>  &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;  &bull;   Require multi-factor authentication <br/>  &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;  &bull;    Require device to be marked as compliant <br/>  &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &bull;  Require Hybrid Azure AD joined device <br/>    &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;         &bull; Require approved client app <br/>  &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &bull;   Require app protection policy (preview)<br/><br/> Many organizations have common access concerns that Conditional Access policies can help with such as: <br/> &bull;  Requiring multi-factor authentication for users with administrative roles <br/>  &bull;  Requiring multi-factor authentication for Azure management tasks <br/>  &bull;  Blocking sign-ins for users attempting to use legacy authentication protocols <br/>  &bull;  Requiring trusted locations for Azure AD Multi-Factor Authentication registration <br/>  &bull;  Blocking or granting access from specific locations <br/> &bull;  Blocking risky sign-in behaviors <br/>  &bull;  Requiring organization-managed devices for specific applications |
| [Building a Conditional Access policy ](https://docs.microsoft.com/en-us/azure/active-directory/conditional-access/concept-conditional-access-policies) | :computer:	Read the referenced URL for additional information :computer:   |
| [Azure Multi-Factor Authentication ](https://docs.microsoft.com/en-us/learn/modules/secure-aad-users-with-mfa/2-azure-multi-factor-authentication) | Multi-factor authentication (MFA) provides additional security for your identities by requiring two or more elements for full authentication. These elements fall into three categories: <br/>   &bull; Something you know <br/> &bull; Something you possess<br/>  &bull; Something you are <br/> <br/> Multi-Factor Authentication comes as part of the following offerings: <br/> &bull; Azure Active Directory Premium or Microsoft 365 Business - Both of these offerings support Azure AD Multi-Factor Authentication using security defaults to require multi-factor authentication. <br/> &bull; Azure AD Free or standalone Microsoft 365 licenses - Use security defaults that require multi-factor authentication for your users and administrators. <br/> &bull; Azure Active Directory Global Administrators - A subset of Azure AD Multi-Factor Authentication capabilities are available as a means to protect global administrator accounts. |
| [Access reviews in Azure AD ](https://docs.microsoft.com/en-us/azure/active-directory/governance/create-access-review) | :computer: Read the referenced URL for additional information :computer: <br/> Azure Portal >> Identity Governance >> Access reviews |
| [Access review in PIM ](https://docs.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-create-azure-ad-roles-and-resource-roles-review) | :computer:	Read the referenced URL for additional information :computer: <br/> Azure Portal >> Privileged Identity Management >> Manage: Azure AD Roles <br/> Azure Portal >> Privileged Identity Management >> Manage: Azure resources |

### Manage application access

| Term | Description |
|---|---|
| [App registration](https://docs.microsoft.com/en-us/learn/modules/secure-app-with-oidc-and-azure-ad/3-create-aad-register-app) | Azure portal -> App registrations -> New application <br/><br/> An app registration includes these details: <br/> &bull; Name. This value identifies the registration and application. <br/> &bull; Application type. Use the Web app/API type for websites or web APIs that are accessed through the HTTP protocol. Use the Native type for applications that are installed on a user's device or computer. <br/> &bull; Sign-on URL. This value is the location of the sign-on page in the published application. <br/> &bull; Application ID. This generated GUID is unique to the registration. Configure your application to send the same GUID to Azure AD whenever it authenticates a user. <br/><br/> 1 - [Tutorial: Register an app with Azure Active Directory](https://docs.microsoft.com/en-us/power-apps/developer/data-platform/walkthrough-register-app-azure-active-directory) <br/> 2 - [Security best practices for application properties in Azure Active Directory](https://docs.microsoft.com/en-us/azure/active-directory/develop/security-best-practices-for-app-registration) |
| [Azure AD consent framework](https://docs.microsoft.com/en-us/azure/active-directory/develop/consent-framework) |Multi-tenant applications allow sign-ins by user accounts from Azure AD tenants other than the tenant in which the app was initially registered. The Microsoft identity platform consent framework enables a tenant administrator or user in these other tenants to consent to (or deny) an application's request for permission to access their resources.<br/><br/>For example, perhaps a web application requires read-only access to a user's calendar in Microsoft 365. It's the identity platform's consent framework that enables the prompt asking the user to consent to the app's request for permission to read their calendar. If the user consents, the application is able to call the Microsoft Graph API on their behalf and get their calendar data.|
| [Managed identities in Azure](https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview#:%7E:text=Managed%20identities%20for%20Azure%20resources%20is%20a%20feature%20of%20Azure%20Active%20Directory.&text=The%20feature%20provides%20Azure%20services,any%20credentials%20in%20your%20code) | [Azure AD identities](https://docs.microsoft.com/en-us/learn/modules/explore-basic-services-identity-types/4-describe-identity-types) include the following: <br/><br/> **User** - A user identity is a representation of something that's managed by Azure AD. Employees and guests are represented as users in Azure AD. If you have several users with the same access needs, you can create a group. You use groups to give access permissions to all members of the group, instead of having to assign access rights individually.  <br/><br/> **Service principal** - A service principal is a security identity used by applications or services to access specific Azure resources. You can think of it as an identity for an application that is commonly reffered to by its Service Principal Name (SPN). <br/><br/> **Device** - A device is a piece of hardware, such as mobile devices, laptops, servers, or printer. Device identities can be set up in different ways in Azure AD, to determine properties such as who owns the device. <br/> <hr/>  **Managed identity** - Managed identities are typically used to manage the credentials for authenticating a cloud application with an Azure service. Managed identities are automatically managed in Azure AD and may be user assigned or system assigned. <br/><br/>  *There are several benefits to using managed identities, including:* <br/> &bull; Application developers can authenticate to services that support managed identities for [Azure resources.](https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/managed-identities-status) <br/> &bull; Any Azure service that supports [Azure AD authentication](https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/services-azure-active-directory-support) can use managed identities to authenticate to another Azure service; for example, accessing Azure Key Vault. Managed identities can be used without any extra cost. <br/> <br/>  ![https://github.com/RickKotlarz/media-files/blob/main/media/Azure-managed-identity-types.png?raw=true](https://github.com/RickKotlarz/media-files/blob/main/media/Azure-managed-identity-types.png?raw=true) <br/> <br/> Resources that support system assigned managed identities allow you to: <br/> &bull; Enable or disable managed identities at the resource level. <br/> &bull; Use role-based access control (RBAC) to grant permissions. <br/> &bull; View the create, read, update, and delete (CRUD) operations in Azure Activity logs. <br/> &bull; View sign in activity in Azure AD sign in logs. <br/> <br/> If you choose a user assigned managed identity instead: <br/> &bull; You can create, read, update, and delete the identities. <br/> &bull; You can use RBAC role assignments to grant permissions. <br/> &bull; User assigned managed identities can be used on more than one resource. <br/> &bull; CRUD operations are available for review in Azure Activity logs. <br/> &bull; View sign in activity in Azure AD sign in logs. <br/> <br/> Operations on managed identities can be performed by using an Azure Resource Manager template, the Azure portal, Azure CLI, PowerShell, and REST APIs. <br/> <br/> *Regardless of the type of identity chosen, a managed identity is a service principal of a special type that can only be used with Azure resources. When the managed identity is deleted, the corresponding service principal is automatically removed.* |


### Manage access control

| Term | Description |
|---|---|
| [Role-based access control (RBAC)](https://docs.microsoft.com/en-us/learn/modules/secure-azure-resources-with-rbac/2-rbac-overview) | Azure RBAC is a newer authorization system that provides fine-grained access management to Azure resources. RBAC includes many built-in roles, can be assigned at different scopes, and allows you to create your own custom roles. The way you control access to resources using RBAC is to create role assignments. This is a key concept to understand – it’s how permissions are enforced.  <br/><br/> ***Role assignments*** control access to resources and require three elements: <br/> 1 - Security principal ("who" // user, group, app) <br/> 2 - Role definition ("what" // collection of permissions) <br/> 3 - Scope ("where" // access given) <br/><br/> ***Azure RBAC is an allow model.*** What this means is that when you are assigned a role, Azure RBAC allows you to perform certain actions, such as read, write, or delete. So, if one role assignment grants you read permissions to a resource group and a different role assignment grants you write permissions to the same resource group, you will have read and write permissions on that resource group. <br/><br/>Difference between Azure RBAC and Azure Policy <br/> Azure RBAC manages who has access to Azure resources, what area they have access to, and what they can do with those resources. <br/>Azure Policies focus on resoure properties during deployment and for already existing resources. <br/> |
| [RBAC scope](https://docs.microsoft.com/en-us/learn/modules/secure-azure-resources-with-rbac/2-rbac-overview) | Scope is "where" the access applies and can be specefied at multiple levels: <br/> &emsp; management group <br/> &emsp; subscription <br/> &emsp; resource group <br/> &emsp; resource <br/><br/> Scopes are structured in a parent-child relationship. When you grant access at a parent scope, those permissions are inherited by the child scopes. For example, if you assign the Contributor role to a group at the subscription scope, that role is inherited by all resource groups and resources in the subscription. <br/><br/> ![https://docs.microsoft.com/en-us/learn/modules/secure-azure-resources-with-rbac/media/2-rbac-scope.png](https://docs.microsoft.com/en-us/learn/modules/secure-azure-resources-with-rbac/media/2-rbac-scope.png) |
| [Built-in Azure RBAC roles](https://docs.microsoft.com/en-us/learn/modules/manage-subscription-access-azure-rbac/2-identify-appropriate-role-assign) | Azure includes several built-in roles that you can use. The following lists four fundamental built-in roles: <br/> <br/> &bull; Owner - Has full access to all resources, including the right to delegate access to others. <br/> &bull; Contributor - Can create and manage all types of Azure resources, but can’t grant access to others. <br/> &bull; Reader - Can view existing Azure resources. <br/> &bull; User Access Administrator - Lets you manage user access to Azure resources. |
| [Create or update Azure custom roles ](https://docs.microsoft.com/en-us/azure/role-based-access-control/custom-roles-portal) | :computer:	Read the referenced URL for additional information :computer: <br/> Azure RBAC has something called NotActions permissions. Use NotActions to create a set of not allowed permissions. The access granted by a role, the effective permissions, is computed by subtracting the NotActions operations from the Actions operations.  <br/><br/> Access control (IAM) >> Role asignment >> <br/> &emsp; &bull; Create a custom role <br/> &emsp; &bull; Grant access to this resource <br/> &emsp; &bull; View access to this resource <br/> >> View / Edit the RBAC data elements within the JSON data as needed | 
| [Configure custom RBAC roles - demo ](https://docs.microsoft.com/en-us/azure/role-based-access-control/custom-roles-portal) | :computer:	Read the referenced URL for additional information :computer: <br/><br/> List custom roles <br/> Get-AzRoleDefinition &#166; FT Name, IsCustom <br/> <br/> List a custom role definition <br/> Get-AzRoleDefinition "Virtual Machine Operator"  &#166; ConvertTo-Json  &#166; out-file  ".\newCustomeRole.json" <br/> &emsp; (edit the JSON to your liking) <br/><br/> Create a new role with the new JSON file <br/> New-AzRoleDefinition -InputFile ".\newCustomeRole.json" <hr/> Update a custom role with the PSRoleDefinition object <br/> $role = Get-AzRoleDefinition "Virtual Machine Operator" <br/>$role.Actions.Add("Microsoft.Insights/diagnosticSettings/*")  <br/> $role.AssignableScopes.Add("/subscriptions/22222222-2222-2222-2222-222222222222") <br/> $role.AssignableScopes.Add("/providers/Microsoft.Management/managementGroups/{groupId1}") <br/> Set-AzRoleDefinition -Role $role|
| [Resource locks ](https://docs.microsoft.com/en-us/learn/modules/control-and-organize-with-azure-resource-manager/6-use-resource-locks-to-protect-resources) | As an administrator, you can lock a subscription, resource group, or resource to prevent other users in your organization from accidentally deleting or modifying critical resources. The lock overrides any permissions the user might have. <br/> <br/> You can set the lock level to **CanNotDelete** or **ReadOnly**. *In the portal, the locks are called **Delete** and **Read-only** respectively.* <br/>  &bull; **CanNotDelete** means authorized users can still read and modify a resource, but they can't delete the resource.  <br/> &bull; **ReadOnly** means authorized users can read a resource, but they can't delete or update the resource. Applying this lock is similar to restricting all authorized users to the permissions granted by the **Reader** role. <br/> <br/> Locks can be applied at the resource level, resource group level or at the subscription level.|

## Implement platform protection (15-20%)

### Implement advanced network security

| Term | Description |
|---|---|
| [Virtual Network Peering](https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-peering-overview) | Azure supports the following types of peering: <br/> 1 - Virtual network peering: Connecting virtual networks within the same Azure region.  <br/> 2 - Global virtual network peering: Connecting virtual networks across Azure regions. <br/> <br/> The benefits of using virtual network peering, whether local or global, include:<br/>  &bull; A low-latency, high-bandwidth connection between resources in different virtual networks. <br/> &bull; The ability for resources in one virtual network to communicate with resources in a different virtual network. <br/> &bull; The ability to transfer data between virtual networks across Azure subscriptions, Azure Active Directory tenants, <br/> &bull;  deployment models, and Azure regions. <br/> &bull; The ability to peer virtual networks created through the Azure Resource Manager. <br/> &bull; The ability to peer a virtual network created through Resource Manager to one created through the classic deployment model. To learn more about Azure deployment models, see Understand Azure deployment models. <br/> &bull; No downtime to resources in either virtual network when creating the peering, or after the peering is created. <br/>  <br/> Security reasons to use virtual peering: <br/> &bull; Network traffic between peered virtual networks is private.  <br/> &bull; Traffic between the virtual networks is kept on the Microsoft backbone network. <br/> &bull; No public Internet, gateways, or encryption is required in the communication between the virtual networks. <br/>  <br/> Service chaining  <br/> &bull; Service chaining enables you to direct traffic from one virtual network to a virtual appliance or gateway in a peered network through user-defined routes. <br/> &bull; To enable service chaining, configure user-defined routes that point to virtual machines in peered virtual networks as the next hop IP address. User-defined routes could also point to virtual network gateways to enable service chaining. <br/>  <br/> Gateways and on-premises connectivity <br/> &bull; Each virtual network, including a peered virtual network, can have its own gateway.  <br/> &bull; A virtual network can use its gateway to connect to an on-premises network.  <br/> &bull; You can also configure [VNET-to-VNET](https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-vnet-vnet-rm-ps?toc=%2Fazure%2Fvirtual-network%2Ftoc.json) connections by using gateways, even for peered virtual networks. <br/> &bull; When you configure both options for virtual network interconnectivity, the traffic between the VNETs flow through the peering configuration and the traffic uses the Azure backbone. <br/>  <br/> Why create a VNet-to-VNet connection <br/> &bull; Cross region geo-redundancy and geo-presence <br/> &bull; Regional multi-tier applications with isolation or administrative boundary|
|[Site-to-Site VPN](https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-howto-site-to-site-classic-portal) | &bull; Connects your on-premises network to an Azure virtual network endpoint over an IPsec/IKE (IKEv1 or IKEv2) VPN tunnel. |
|[Point-to-Site connection](https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-howto-point-to-site-classic-azure-portal) | This is a classic deployment model and is not recommended. It supports Windows VPN clients only, uses the Secure Socket Tunneling Protocol (SSTP), an SSL-based VPN protocol. |
| [Network security groups (NSGs)](https://docs.microsoft.com/en-us/learn/modules/secure-and-isolate-with-nsg-and-service-endpoints/2-network-security-groups) |  NSGs operate at layers 3 & 4, and provide a list of allowed and denied communication to and from network interfaces and subnets. NSGs are fully customizable, and give you the ability to fully lock down network communication to and from your Azure resources (e.g. virtual machines) in an Azure virtual network. By using NSGs, you can isolate applications between environments, tiers, and services. <br/><br/>***Note: NSGs uses static IP addresses and as your network scales this may become difficult to maintain.***  <br/><br/> For each rule, you can specify source and destination, port, and protocol. <br/> <br/> Network security groups are evaluated and applied based on the five-tuple (properties): <br/> &bull; Name = Unique name within the NSG <br/> &bull; Priority = A number between 100 and 4096 used to priorities rules (lower has higher priority) <br/> &bull; Source / Destination = Any, or an individual IP address, classless inter-domain routing (CIDR) block, service tag, or ASG. <br/> &bull; Protocol  = TCP, UDP, ICMP, ESP, AH, or Any. <br/> &bull; Direction = Whether the rule applies to inbound, or outbound traffic <br/> &bull; Port range	= Single port or range of ports <br/> &bull; Action = Allow or deny <br/> <br/> Azure creates the following default rules in each NSG that is created: <br/><br/> ![https://raw.githubusercontent.com/RickKotlarz/media-files/main/media/Default-NSG-rules.png](https://raw.githubusercontent.com/RickKotlarz/media-files/main/media/Default-NSG-rules.png) |
| [NSG deployment scenarios](https://docs.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works) |  :computer:	Read the referenced URL for additional information :computer: |
| [Virtual network service tags](https://docs.microsoft.com/en-us/azure/virtual-network/service-tags-overview) | A service tag represents a group of IP address prefixes from a given Azure service. It helps to minimize the complexity of frequent updates on network security rules. Microsoft manages the address prefixes encompassed by the service tag and automatically updates the service tag as addresses change, minimizing the complexity of frequent updates to network security rules. <br/> <br/>  You can use service tags to define network access controls on: <br/> &bull; Network security groups <br/> &bull; Azure Firewall <br/> &bull; User-defined routes |
| [Application security groups (ASGs)](https://docs.microsoft.com/en-us/learn/modules/secure-and-isolate-with-nsg-and-service-endpoints/2-network-security-groups) | &bull; Application Security Groups (ASG) are a feature within Azure that helps simplify the management of Network Security Group (NSG) rules.  <br/> &bull; Application security groups enable you to configure network security as a natural extension of an application's structure, ***allowing you to group virtual machines and define network security policies based on those groups***. You can reuse your security policy at scale without manual maintenance of explicit IP addresses. [Application Security Groups (ASG) supplemental](https://docs.microsoft.com/en-us/azure/virtual-network/application-security-groups) |
| [Configure NSGs and ASGs - demo](https://docs.microsoft.com/en-us/azure/virtual-network/manage-network-security-group) |  :computer:	Read the referenced URL for additional information :computer: |
| [Azure Firewall](https://docs.microsoft.com/en-us/azure/firewall/features) |  &bull; Azure Firewall is a managed, cloud-based, network security service that protects your Azure Virtual Network resources, has built-in high availability and unrestricted cloud scalability. <br/> &bull; It is a fully stateful firewall meaning that inspects and maintains data on the entire context of the network connection and makes a decision based on current state. <br/> &bull; Azure Firewall provides inbound protection for non-HTTP/S protocols. (e.g. RDP, SSH, FTP) <br/> &bull; It also provides outbound, network-level protection for all ports and protocols, and application-level protection for outbound HTTP/S. [Azure Firewall Overview](https://docs.microsoft.com/en-us/azure/firewall/overview) <br/><br/> Azure Firewall is offered in two SKUs: <br/> 1 - Azure Firewall Standard provides L3-L7 filtering and threat intelligence feeds directly from Microsoft Cyber Security. Threat intelligence-based filtering can alert and deny traffic from/to known malicious IP addresses and domains which are updated in real time to protect against new and emerging attacks. <br/> 2 - Azure Firewall Premium provides advanced capabilities include signature-based Intrusion Detection and Prevention System (IDPS) to allow rapid detection of attacks by looking for specific patterns. These patterns can include byte sequences in network traffic, or known malicious instruction sequences used by malware.|
| [Azure Firewall Manager](https://docs.microsoft.com/en-us/azure/firewall-manager/overview) | Firewall Manager can provide security management for two network architecture types: <br/> 1 - [Secured virtual hub](https://docs.microsoft.com/en-us/azure/firewall-manager/secured-virtual-hub) = An Azure Virtual WAN Hub is a Microsoft-managed resource that lets you easily create hub and spoke architectures. When security and routing policies are associated with such a hub, it is referred to as a secured virtual hub. <br/> 2 - Hub virtual network = This is a standard Azure virtual network that you create and manage yourself. When security policies are associated with such a hub, it is referred to as a hub virtual network. <br/> <br/> Firewall Manager  <br/> &bull; Leverages firewall policies to apply a common set of network/application rules and configurations to the firewalls and secured virtual hubs within your tenant. <br/> &bull; Supports deployment and configuration of multiple Azure Firewall instances that span different Azure regions and subscriptions. <br/> &bull; Can be integrated with third-party security-as-a-service providers <br/> &bull; Easily route traffic to your secured hub for filtering and logging without the need to manually set up User Defined Routes (UDR) on spoke virtual networks. <br/> &bull; Supports firewalls in both VNet and Virtual WANs (Secure Virtual Hub) environments. Secure Virtual Hubs use the Virtual WAN route automation solution to simplify routing traffic to the firewall with a few clicks. |
| [Deploy and configure Azure Firewall](https://docs.microsoft.com/en-us/azure/firewall/tutorial-firewall-deploy-portal) | :computer: Read the referenced URL for additional information :computer: |
| [Web Application Firewall](https://docs.microsoft.com/en-us/learn/modules/describe-basic-security-capabilities-azure/6-describe-what-web-application-firewall?WT.mc_id=esi_studyguide_content_wwl) | Web applications are increasingly targeted by malicious attacks that exploit commonly known vulnerabilities. **SQL injection and cross-site scripting are among the most common attacks**. <br/> <br/> Web Application Firewall (WAF) provides centralized protection of your web applications from common exploits and vulnerabilities. A centralized WAF helps make security management simpler, improves the response time to a security threat, and allows patching a known vulnerability in one place, instead of securing each web application. A WAF also gives application administrators better assurance of protection against threats and intrusions. ***WAF can be deployed with Azure Application Gateway, Azure Front Door, and Azure Content Delivery Network (CDN) service from Microsoft.*** <br/> <br/> [Introduction to Azure Web Application Firewalls](https://docs.microsoft.com/en-us/azure/web-application-firewall/overview) |
| [Azure Front Door](https://docs.microsoft.com/en-us/azure/frontdoor/front-door-overview) | Azure Front Door is Microsoft’s modern cloud Content Delivery Network (CDN) <br/> &bull; Natively support end-to-end IPv6 connectivity and the HTTP/2 protocol. <br/> &bull; Optimized so that client requests are routed to the fastes and most available application backend. <br/> &bull; Application backends can be any Internet facing service that is hosted inside or outside of Azure. <br/> &bull; Allows for use of Front Door’s anycast network and split TCP connections. <br/> &bull; SSL offloading at the edge <br/> &bull; Free, autorotation managed SSL certificates <br/> &bull; Built-in layer 3-4 DDoS protection <br/> &bull; Easily attached [Web Application Firewall (WAF)](https://docs.microsoft.com/en-us/azure/web-application-firewall/afds/afds-overview), and [Azure DNS](https://docs.microsoft.com/en-us/azure/frontdoor/how-to-configure-endpoints) to protect your domains. <br/> <br/>Azure Front Door is offered in [3 different tiers](https://docs.microsoft.com/en-us/azure/frontdoor/standard-premium/tier-comparison) <br/> 1 - Classic <br/> 2 - Standard <br/> 3 - Premium (Standard + Microsoft managed rule set, Bot protection, and Private link support) <br/> <br/> Azure Front Door Standard and Premium tier combines capabilities of Azure Front Door (classic), Azure CDN Standard from Microsoft (classic), and Azure WAF into a single secure cloud CDN platform with intelligent threat protection. <br/> <br/> [Front Door (classic)](https://docs.microsoft.com/en-us/azure/frontdoor/classic-overview) <br/> &bull; Operates on Layer 7 or HTTP/HTTPS <br/> &bull; Accelerated application performance by using split TCP-based anycast protocol. <br/> &bull; Intelligent health probe monitoring for backend resources. <br/> &bull; URL-path based routing for requests. <br/> &bull; Enables hosting of multiple websites for efficient application infrastructure. <br/> &bull; Cookie-based session affinity. <br/> &bull; SSL offloading and certificate management. <br/> &bull; Define your own custom domain. <br/> &bull; Application security with integrated Web Application Firewall (WAF). <br/> &bull; Redirect HTTP traffic to HTTPS with URL redirect. <br/> &bull; Custom forwarding path with URL rewrite. <br/> &bull; Native support of end-to-end IPv6 connectivity and HTTP/2 protocol. |
| [Azure Bastion](https://docs.microsoft.com/en-us/azure/bastion/bastion-overview) | Azure Bastion provides secure and seamless RDP/SSH connectivity to your virtual machines directly from the Azure portal using Transport Layer Security (TLS). When you connect via Azure Bastion, your virtual machines don't need a public IP address, agent, or special client software.<br/> <br/> Key features of Azure Bastion include: <br/> &bull; RDP and SSH directly in Azure portal <br/> &bull; Remote session over TLS and firewall traversal for RDP/SSH: Use an HTML5-based web client that's automatically streamed to your local device. <br/> &bull; No Public IP required on the Azure VM <br/> &bull; No hassle of managing NSGs as you don't need to apply any NSGs on an Azure Bastion subnet <br/> &bull; Protection against port scanning <br/> &bull; Protect against zero-day exploits |
| [Create an Azure Bastion host](https://docs.microsoft.com/en-us/azure/bastion/tutorial-create-host-portal) | Azure portal >> Resource Groups >> YourRG >> YourVMsVNET >> Subnets >> then add the subnet <br/> <br/> &bull; The bastion subnet name MUST be "AzureBastionSubnet" and have a subnet mask /26 or larger |
| [Service endpoints](https://docs.microsoft.com/en-us/learn/modules/secure-and-isolate-with-nsg-and-service-endpoints/4-vnet-service-endpoints) | Virtual Network (VNet) service endpoints provide secure and direct connectivity to Azure services over an optimized route over the Azure backbone network rather than the Internet  <br/> <br/> To enable a service endpoint, you must: <br/> 1 - Turn off public access to the service. <br/> 2 - Add the service endpoint to a virtual network. <br/><br/> [Private Link](https://docs.microsoft.com/en-us/azure/private-link/) – The umbrella Azure service under which you can make your PaaS resources available privately on a virtual network.<br/><br/> [Private Endpoint](https://docs.microsoft.com/en-us/azure/private-link/private-endpoint-overview) – The logical Azure resource, a private endpoint, that is mapped to a private IP address. This is the interface that will be connected to while accessing PaaS resources over your private virtual network. <br/><br/> [Private Link Service](https://docs.microsoft.com/en-us/azure/private-link/private-link-overview) – The service you make available over private network peering to other business units or customers. The service uses an internal Azure standard load balancer to map the Private Link Service IP to the load balancer front end. You can reference this service via a private endpoint to gain access to these resources without ever interacting with the Internet. This can be accomplished across Azure AD tenants. |
| [Distributed denial of service (DDoS) protection](https://docs.microsoft.com/en-us/learn/modules/protect-against-security-threats-azure/) | DDoS Protection leverages the scale and elasticity of Microsoft’s global network to bring DDoS mitigation capacity to every Azure region. The Azure DDoS Protection service protects your Azure applications by scrubbing traffic at the Azure network edge before it can impact your service's availability. Within a few minutes of attack detection, you are notified using Azure Monitor metrics.<br/><br/> Comes in two versions: <br/> Azure DDoS Protection Basic (*Free*)<br/> Azure DDoS Protection Standard (*provides SLAs for Application and Cost Protection*) <br/><br/> Every property in Azure is protected by Azure's infrastructure DDoS (Basic) Protection at no additional cost and requires no user configuration or application changes. <br/> ![](https://docs.microsoft.com/en-us/azure/ddos-protection/media/ddos-protection-overview/ddos-comparison.png) <br/> <br/> DDoS Protection Standard can mitigate the following types of attacks: <br/>**Volumetric attacks**: These attacks flood the network layer with a substantial amount of seemingly legitimate traffic. They include UDP floods, amplification floods, and other spoofed-packet floods. DDoS Protection Standard mitigates these potential multi-gigabyte attacks by absorbing and scrubbing them, with Azure's global network scale, automatically.<br/> **Protocol attacks**: These attacks render a target inaccessible, by exploiting a weakness in the layer 3 and layer 4 protocol stack. They include SYN flood attacks, reflection attacks, and other protocol attacks. DDoS Protection Standard mitigates these attacks, differentiating between malicious and legitimate traffic, by interacting with the client, and blocking malicious traffic. <br/> **Resource (application) layer attacks**: These attacks target web application packets, to disrupt the transmission of data between hosts. They include HTTP protocol violations, SQL injection, cross-site scripting, and other layer 7 attacks. Use a Web Application Firewall, such as the Azure  |[Application Gateway web application firewall](https://docs.microsoft.com/en-us/azure/web-application-firewall/ag/ag-overview?toc=/azure/virtual-network/toc.json), as well as DDoS Protection Standard to provide defense against these attacks. There are also third-party web application firewall offerings available in the  [Azure Marketplace](https://azuremarketplace.microsoft.com/marketplace/apps?page=1&search=web%20application%20firewall). |

## PowerShell for managing network security groups
```
### Create a network security group
New-AzNetworkSecurityGroup -Name "nsg1" -ResourceGroupName "rg1"  -Location  "westus"

### View all network security groups
Get-AzNetworkSecurityGroup -Name nsg1 -ResourceGroupName "rg1"

### Change a network security group
Get-AzNetworkSecurityGroup -Name "Nsg1" -ResourceGroupName "Rg1" | Add-AzNetworkSecurityRuleConfig -Name "Rdp-Rule" -Description "Allow RDP" -Access "Allow" -Protocol "Tcp" -Direction "Inbound" -Priority 100 -SourceAddressPrefix "Internet" -SourcePortRange "*" -DestinationAddressPrefix "*" -DestinationPortRange "3389" | Set-AzNetworkSecurityGroup

### Delete a network security group
Remove-AzNetworkSecurityGroup -Name "NSG-FrontEnd" -ResourceGroupName "TestRG"

### Create a security rule - Allow RDP
$rule1 = New-AzNetworkSecurityRuleConfig -Name rdp-rule -Description "Allow RDP" `
    -Access Allow -Protocol Tcp -Direction Inbound -Priority 100 -SourceAddressPrefix `
    Internet -SourcePortRange * -DestinationAddressPrefix * -DestinationPortRange 3389

### Create a security rule - Allow HTTP
$rule2 = New-AzNetworkSecurityRuleConfig -Name web-rule -Description "Allow HTTP" `
    -Access Allow -Protocol Tcp -Direction Inbound -Priority 101 -SourceAddressPrefix `
    Internet -SourcePortRange * -DestinationAddressPrefix * -DestinationPortRange 80

### View all security rules - Retrieving a network security rule config
Get-AzNetworkSecurityGroup -Name nsg1 -ResourceGroupName rg1 
    | Get-AzNetworkSecurityRuleConfig -Name AllowInternetOutBound -DefaultRules
	
### View all security rules - Retrieving a network security rule config using only the name
Get-AzNetworkSecurityGroup -Name nsg1 -ResourceGroupName rg1 
    | Get-AzNetworkSecurityRuleConfig -Name "rdp-rule"
	
### Change a security rule - Example 1
Set-AzNetworkSecurityRuleConfig -Access Allow -DestinationAddressPrefix * -DestinationPortRange 3389 -Direction Inbound -Name 'rdp-rule' -NetworkSecurityGroup <PSNetworkSecurityGroup> -Priority 1 -Protocol Tcp -SourceAddressPrefix 'Internet' -SourcePortRange *

### Delete a security rule
$rule1 = New-AzNetworkSecurityRuleConfig -Name "rdp-rule" -Description "Allow RDP" -Access "Allow" -Protocol "Tcp" -Direction "Inbound" -Priority 100 -SourceAddressPrefix "Internet" -SourcePortRange * -DestinationAddressPrefix * -DestinationPortRange 3389
$nsg = New-AzNetworkSecurityGroup -ResourceGroupName "TestRG" -Location "westus" -Name "NSG-FrontEnd" -SecurityRules $rule1

### Remove-AzNetworkSecurityRuleConfig -Name "rdp-rule" -NetworkSecurityGroup $nsg
$nsg | Set-AzNetworkSecurityGroup

### Delete an application security group
Remove-AzApplicationSecurityGroup -Name "MyApplicationSecurityGrouo" -ResourceGroupName "MyResourceGroup"
```
<hr/>
### Configure advanced security for compute

| Term | Description |
|---|---|
| [Endpoint protection](https://docs.microsoft.com/en-us/azure/defender-for-cloud/endpoint-protection-recommendations-technical) | Defender for Cloud supports various third party endpoint protection solutions. <br/><br/> Use the PowerShell Get-MpComputerStatus CMDlet to identify the health status of endpoint protection configurations and address these issues if... <br/> &emsp; AMServiceEnabled = false <br/> &emsp; AntispywareEnabled = false <br/> &emsp; RealTimeProtectionEnabled = false <br/> &emsp; BehaviorMonitorEnabled = false <br/> &emsp; IoavProtectionEnabled = false <br/> &emsp; OnAccessProtectionEnabled = false <br/> &emsp; AntispywareSignatureAge >= 7 <br/> &emsp; AntivirusSignatureAge >= 7 <br/> |
| [Vulnerability management with Microsoft Defender for Cloud](https://docs.microsoft.com/en-us/azure/defender-for-cloud/deploy-vulnerability-assessment-tvm) | **Microsoft Defender for Endpoint's threat and vulnerability management tools** <br> Microsoft's threat and vulnerability management is a built-in module in Microsoft Defender for Endpoint that can: <br/> &bull; Discover vulnerabilities and misconfigurations in real time with sensors, and without the need of agents or periodic scans. <br/> &bull; Prioritizes vulnerabilities based on the threat landscape, detections in your organization, sensitive information on vulnerable devices, and business context.  <br/><br/> **Integrated vulnerability assessment solution (powered by Qualys)** <br/>Defender for Cloud includes vulnerability scanning for your machines at no extra cost. You don't need a Qualys license or even a Qualys account - everything's handled seamlessly inside Defender for Cloud. This page provides details of this scanner and instructions for how to deploy it. |
| [Update Management](https://docs.microsoft.com/en-us/azure/automation/update-management/overview) |Azure Portal >> VM >> Operations (Updates)<br/> Note that the  current version of Update Management uses Azure Automation to manage updates and patching for virtual machines. <br/> <br/>  You can use Update Management in Azure Automation to manage operating system updates for your Windows and Linux virtual machines in Azure, physical or VMs in on-premises environments, and in other cloud environments. You can quickly assess the status of available updates and manage the process of installing required updates for your machines reporting to Update Management. <br/><br/> As a service provider, you may have onboarded multiple customer tenants to ***Azure Lighthouse***. Update Management can be used to assess and schedule update deployments to machines in multiple subscriptions in the same Azure Active Directory (Azure AD) tenant, or across tenants using Azure Lighthouse. <br/><br/> [Automatic VM guest patching for Azure VMs](https://docs.microsoft.com/en-us/azure/virtual-machines/automatic-vm-guest-patching) <br/> Enabling automatic VM guest patching for your Azure VMs helps ease update management by safely and automatically patching virtual machines to maintain security compliance. <br/> &bull; Patches classified as Critical or Security are automatically downloaded and applied on the VM. <br/> &bull; Patches are applied during off-peak hours in the VM's time zone. <br/> &bull; Patch orchestration is managed by Azure and patches are applied following availability-first principles.  <br/> &bull; Virtual machine health, as determined through platform health signals, is monitored to detect patching failures. <br/> &bull; Works for all VM sizes. <br/> <br/> [Azure virtual machine scale set automatic OS image upgrades](https://docs.microsoft.com/en-us/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-automatic-upgrade) <br/> Enabling automatic OS image upgrades on your scale set helps ease update management by safely and automatically upgrading the OS disk for all instances in the scale set. Automatic OS upgrade has the following characteristics: <br/> &bull; Once configured, the latest OS image published by image publishers is automatically applied to the scale set without user intervention.  <br/> &bull; Upgrades batches of instances in a rolling manner each time a new image is published by the publisher.  <br/> &bull; Integrates with application health probes and Application Health extension. <br/> &bull; Works for all VM sizes, and for both Windows and Linux images including custom images through Azure Compute Gallery.  <br/> &bull; You can opt out of automatic upgrades at any time (OS Upgrades can be initiated manually as well). <br/> &bull; The OS Disk of a VM is replaced with the new OS Disk created with latest image version. Configured extensions and custom data scripts are run, while persisted data disks are retained. <br/> &bull; Extension sequencing is supported.  <br/> &bull; Can be enabled on a scale set of any size. |
| [Azure App Service](https://docs.microsoft.com/en-us/azure/app-service/overview) | Azure App Service is fully managed platform as a service (PaaS) HTTP-based service offering for developers used to host web applications, REST APIs, and mobile back ends. You can develop in your favorite language, be it .NET, .NET Core, Java, Ruby, Node.js, PHP, or Python. Applications run and scale with ease on both Windows and Linux-based environments. <br/><br/> App Service not only adds the power of Microsoft Azure to your application, such as security, load balancing, autoscaling, and automated management. You can also take advantage of its DevOps capabilities, such as continuous deployment from Azure DevOps, GitHub, Docker Hub, and other sources, package management, staging environments, custom domain, and TLS/SSL certificates. |
| [Adding a TLS/SSL certificate in Azure App Service](https://docs.microsoft.com/en-us/azure/app-service/configure-ssl-certificate) | Methods for adding certificates in App Service: <br/> &bull; Create a free App Service managed certificate - A private certificate that's free of charge and easy to use if you just need to secure your custom domain in App Service.<br/> &bull;  Purchase an App Service certificate - A private certificate that's managed by Azure. It combines the simplicity of automated certificate management and the flexibility of renewal and export options. <br/> &bull; Import a certificate from Key Vault - Useful if you use Azure Key Vault to manage your PKCS12 certificates. See Private certificate requirements. <br/> &bull; Upload a private certificate - If you already have a private certificate from a third-party provider, you can upload it. See Private certificate requirements. <br/> &bull; Upload a public certificate - Public certificates are not used to secure custom domains, but you can load them into your code if you need them to access remote resources. |
| [Microsoft Defender for Containers](https://docs.microsoft.com/en-us/azure/defender-for-cloud/defender-for-containers-introduction&tabs=defender-for-container-arch-aks) | Defender for Containers helps with the core aspects of container security:<br/> <br/> &bull; Environment hardening - Defender for Containers protects your Kubernetes clusters whether they're running on Azure Kubernetes Service, Kubernetes on-premises/IaaS, or Amazon EKS. By continuously assessing clusters, Defender for Containers provides visibility into misconfigurations and guidelines to help mitigate identified threats. <br/>&bull; Vulnerability assessment - Vulnerability assessment and management tools for images stored in ACR registries and running in Azure Kubernetes Service. <br/>&bull; Run-time threat protection for nodes and clusters - Threat protection for clusters and Linux nodes generates security alerts for suspicious activities.  <br/> <br/> [Security considerations for Azure Container Instances](https://docs.microsoft.com/en-us/azure/container-instances/container-instances-image-security) |
| [Azure Kubernetes  Service Components](https://docs.microsoft.com/en-us/azure/aks/concepts-clusters-workloads)| Azure managed resources (Control plane): <br/>&bull; kube-apiserver	- Used to provide interaction for managment tools <br/> &bull; etcd - Used to maintain the state of the Kubernetes cluster and configuration. This is a key value store. <br/> &bull; kube-scheduler - This determins which noes can be used to run workloads and then starts workloads accordingly. <br/> &bull; kube-controller-manager - This hanles the controllers that are used to contol the replication of pods and node operations. <br/> <br/> Customer managed resource (Nodes and node pools): <br/> &bull; kubelet - Used to take control from the control plane and schedules the running of requested containers <br/> &bull; container runtime (*containerd*) - Used to run the containers and helps containers interact with network and storage resources <br/> &bull; kube-proxy - Used to route network traffic and manages the IP addressing for the services and pods. <br/> &bull; Pods - Used to run an instance of the application. Each pod represents a single instance of the app. Normally each pod is mapped to a single container. <br/> &bull; Deployment - Deployement is used to represent the deployment of one or more idential pods. If the the Scheduler discovers that a any pods or nodes encountered issues, additional pods are created on healthy nodes. |
| [Azure Container Registry service](https://docs.microsoft.com/en-us/azure/container-registry/container-registry-intro)| &bull; Azure Container Registry is a managed registry service based on the open-source Docker Registry 2.0. Create and maintain Azure container registries to store and manage your container images and related artifacts.<br/> &bull; This service can be used to store private Docker container images and can be integrated with the Azure Kubernetes service <br/><br/> [Authentication with an Azure container registry via:](https://docs.microsoft.com/en-us/azure/container-registry/container-registry-authentication?tabs=azure-cli) <br/> &bull; Individual AD identity <br/> &bull; AD service principal <br/> &bull; Managed identity for Azure resources <br/> &bull; AKS cluster managed identity <br/> &bull; AKS cluster service principal <br/> &bull; Admin user <br/> &bull; Repository-scoped access token |
| [Access and identity options for Azure Kubernetes Service (AKS) ](https://docs.microsoft.com/en-us/azure/aks/concepts-identity) | &bull; Using Kubernetes role-based access control (Kubernetes RBAC), you can grant users, groups, and service accounts access to only the resources they need. <br/> &bull; With Azure Kubernetes Service (AKS), you can further enhance the security and permissions structure via Azure Active Directory and Azure RBAC. <br/> <br/> Azure Container Registry Roles: <br/> Owner / Contributor =  Can do everything EXCEPT sign images <br/> Reader = Can pull an image from the reigstry <br/>  ArcPush = Can push AND pull an image from the registry <br/> AcrPull = Can only pull an image from the registry <br/> ArcImageSigner = Allows signing of images <br/> <br/> ![AKS_roles.png](https://github.com/RickKotlarz/media-files/blob/main/media/AKS_roles.png?raw=true) |
| [Configure security for container registry](https://docs.microsoft.com/en-us/security/benchmark/azure/baselines/container-registry-security-baseline) | Microsoft provides Azure security baseline for Container Registry in the form of Azure Security Benchmarks that provide guidance which are directly applicable to the Container Registry. <br/><br/> Content Trust <br/> &bull; Enable content trust to sign and push images to the registry <br/> &bull; If client side consumers enable content trust, they will only see signed images <br/> &bull; Signed images are considered genuine and free from tampering. <br/> <br/> Integration with Security Center <br/> &bull; Azure Security Center (standard SKU) can integrate with Azure container registry <br/> &bull; Security Center will then scan all images pushed to the Azure container registry |
| [Network concepts for applications in AKS](https://docs.microsoft.com/en-us/azure/aks/concepts-network) | ***Services*** <br/> To simplify the network configuration for application workloads, Kubernetes uses Services to logically group a set of pods together and provide network connectivity.<br/> <br/> ***Azure virtual networks*** <br/> In AKS, you can deploy a cluster that uses one of the following two network models: <br/> &emsp; 1.  Kubenet networking - The network resources are typically created and configured as the AKS cluster is deployed. <br/> &emsp; 2.  Azure Container Networking Interface (CNI) networking - The AKS cluster is connected to existing virtual network resources and configurations. <br/><br/> ***Ingress controllers*** <br/> &emsp;&bull; When you create a LoadBalancer-type Service, you also create an underlying Azure load balancer resource. The load balancer is configured to distribute traffic to the pods in your Service on a given port. <br/> &emsp;&bull; The LoadBalancer only works at layer 4. At layer 4, the Service is unaware of the actual applications, and can't make any more routing considerations. <br/> &emsp;&bull; Ingress controllers work at layer 7, and can use more intelligent rules to distribute application traffic. Ingress controllers typically route HTTP traffic to different applications based on the inbound URL. With the Application Gateway Ingress Controller (AGIC) add-on, AKS customers leverage Azure's native Application Gateway level 7 load-balancer to expose cloud software to the Internet. <br/> <br/> ***Network policies*** <br/> &emsp;&bull; By default, all pods in an AKS cluster can send and receive traffic without limitations. To improve security, define rules that control the flow of traffic to only resources that must have that traffic. <br/> &emsp;&bull; Network policy is a Kubernetes feature available in AKS that lets you control the traffic flow between pods. You allow or deny traffic to the pod based on settings such as assigned labels, namespace, or traffic port. While network security groups are better for AKS nodes, network policies are a more suited, cloud-native way to control the flow of traffic for pods. As pods are dynamically created in an AKS cluster, required network policies can be automatically applied. |

## Manage security operations (25-30%)

### Monitor security by using Azure Monitor

| Term | Description |
|---|---|
| [Azure Monitor](https://docs.microsoft.com/en-us/learn/modules/analyze-infrastructure-with-azure-monitor-logs/2-features-azure-monitor-log) | Azure Monitor maximizes the availability and performance of your applications and services by delivering a comprehensive solution for collecting, analyzing, and acting on telemetry from your cloud and on-premises environments (assumes you install the Log Analytics Agent). It helps you understand how your applications are performing and proactively identifies issues affecting them and the resources they depend on. <br/><br/>Just a few examples of what you can do with Azure Monitor include:<br/><br/> &bull; Detect and diagnose issues across applications and dependencies with  [Application Insights](https://docs.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview). <br/> &bull;  Correlate infrastructure issues with  [VM insights](https://docs.microsoft.com/en-us/azure/azure-monitor/vm/vminsights-overview)  and  [Container insights](https://docs.microsoft.com/en-us/azure/azure-monitor/containers/container-insights-overview). <br/> &bull;   Drill into your monitoring data with  [Log Analytics](https://docs.microsoft.com/en-us/azure/azure-monitor/logs/log-query-overview)  for troubleshooting and deep diagnostics. <br/> &bull;   Support operations at scale with  [automated actions](https://docs.microsoft.com/en-us/azure/azure-monitor/alerts/alerts-action-rules). <br/> &bull;  Create visualizations with Azure  [dashboards](https://docs.microsoft.com/en-us/azure/azure-monitor/visualize/tutorial-logs-dashboards)  and  [workbooks](https://docs.microsoft.com/en-us/azure/azure-monitor/visualize/workbooks-overview). <br/> &bull;   Collect data from  [monitored resources](https://docs.microsoft.com/en-us/azure/azure-monitor/monitor-reference)  by using  [Azure Monitor Metrics](https://docs.microsoft.com/en-us/azure/azure-monitor/essentials/data-platform-metrics). <br/> &bull;  Investigate change data for routine monitoring or for triaging incidents by using  [Change Analysis](https://docs.microsoft.com/en-us/azure/azure-monitor/change/change-analysis). <br/> <br/> Types of data collected include: <br/> &bull; Application monitoring data = Data collected with regards to the perforamance and functionality of application code <br/> &bull; Guest OS monitoring data = Data collected about the underlying operating system (Windows / Linux event logs) on which the app runs. The OS can be running in Azure, another cloud or on-premises. <br/> &bull; Azure resource monitoring data =  Data about the operation of an Azure resource <br/> &bull; Azure subscription monitoring data: Data about the operation and management of an Azure subscription, and data about the health and operation of Azure itself. <br/> &bull; Azure tenant monitoring data = Data about the operation of tenant-level Azure services, such as Azure Active Directory <br/> &bull; Azure resource change data = Data about changes within your Azure resources and how to address and triage incidents and issues. <br/> <br/>  [Azure Monitor Overview](https://docs.microsoft.com/en-us/azure/azure-monitor/overview) |
| [Azure Monitor Alerts](https://docs.microsoft.com/en-us/learn/modules/incident-response-with-alerting-on-azure/2-explore-azure-monitor-alert-types) | <br/>A data type will be a metric, a log, or both a metric and a log: <br/> <br/> &bull; The focus for metric-based data types is the numerical time-sensitive values that represent some aspect of the target resource. <br/> &bull; The focus for log-based data types is the querying of content data held in structured, record-based log files that are relevant to the target resource.<br/> <br/> <br/>Three signal types that you can use to monitor your environment: <br/> <br/>1 - Metric alerts provide an alert trigger when a specified threshold is exceeded. For example, a metric alert can notify you when CPU usage is greater than 95 percent. <br/>2 - Activity log alerts notify you when Azure resources change state. For example, an activity log alert can notify you when a resource is deleted. <br/>3 - Log alerts are based on things written to log files. For example, a log alert can notify you when a web server has returned a number of 404 or 500 responses.|
| [Create, view, and manage log alerts using Azure Monitor](https://docs.microsoft.com/en-us/azure/azure-monitor/alerts/alerts-log) | Azure Monitor log alerts allow users to use a Log Analytics query to evaluate resource logs at a set frequency and fire an alert based on the results. Rules can trigger one or more actions using [alert processing rules](https://docs.microsoft.com/en-us/azure/azure-monitor/alerts/alerts-action-rules?tabs=portal) and [action groups](https://docs.microsoft.com/en-us/azure/azure-monitor/alerts/action-groups). Learn the concepts behind log alerts here. <br/> <br/>Azure portal >> Resource, RG, or Subscription >> (Monitoring) "Alerts" >> Create <br/> <br/>- OR -  <br/> <br/>Azure portal >> Resource, RG, or Subscription >> Logs <br/>&emsp; &emsp;  >> Select existing rule or create one >> New Rule Alert <br/> <br/> You create an alert rule by combining: <br/> 1 - The resource(s) to be monitored. <br/> 2 - The signal or telemetry from the resource <br/> 3 - Conditions <br/>  <br/> And then defining these elements of the triggered alert: <br/> 1 - Alert processing rules <br/> 2 - Action groups | 
| [Configuring diagnostic logging and log retention](https://docs.microsoft.com/en-us/azure/azure-monitor/essentials/diagnostic-settings) | <br/> First - Create a Log Analytics Workspaces <br/> &bull; Azure Portal >> Log Analytics Workspaces >> Create a new Log Analytics Workspace <br/> <br/> &bull; Log Analytics Workspaces >> (Workspace Data Sources) Select data source you want to view <br/> &bull; To deploy the agent to a new source simply select that source followed by "Connect"  <br/> <br/> ![https://raw.githubusercontent.com/RickKotlarz/media-files/main/media/Log_anlytics_workspace.png](https://raw.githubusercontent.com/RickKotlarz/media-files/main/media/Log_anlytics_workspace.png) <br/> <br/>Azure Portal >> Log Analytics Workspaces >> Settings (Agents management) <br/> &bull; Agents management = Allows you to download Log Analytics agents   <br/> <br/>Azure Portal >> Log Analytics Workspaces >> Settings (Agents configuration) <br/> &bull; Agents configuration = Allows you to customize data that is collected  <br/>  <br/> Second - Navigate to that the resource you want to monitor and enable logging  <br/>  <br/> SaaS = ResourceYouWantToMonitor >> Monitoring >> Diagnostics settings >> "Add diagnostic setting" <br/>  <br/> Destination options   <br/> &emsp; &bull; Send to Log Analytics workspace  <br/> &emsp; &bull; Archive to a storage account  <br/> &emsp; &bull; Stream to an event hub  <br/> &emsp; &bull; Send to partner solution <br/> <br/> ![https://raw.githubusercontent.com/RickKotlarz/media-files/main/media/Diagnostic_Settings_SaaS.png](https://raw.githubusercontent.com/RickKotlarz/media-files/main/media/Diagnostic_Settings_SaaS.png) <br/> <br/> VMs  = Azure Portal >> ResourceYouWantToMonitor >> Monitoring >> Diagnostics settings >> Custom <br/> <br/> ![https://raw.githubusercontent.com/RickKotlarz/media-files/main/media/Diagnostic_Settings_VM.png](https://raw.githubusercontent.com/RickKotlarz/media-files/main/media/Diagnostic_Settings_VM.png)<br/><br/>   Note that the VM has to be on, a data store configured and the Log Analtyics Engine connected. <br/> <br/> Note that while you're able to configure additional custom logs [platform metrics](https://docs.microsoft.com/en-us/azure/azure-monitor/essentials/metrics-supported) are sent automatically to Azure Monitor Metrics via the deployed agent by default and without configuration. [Platform logs](https://docs.microsoft.com/en-us/azure/azure-monitor/essentials/platform-logs-overview) provide detailed diagnostic and auditing information for Azure resources and the Azure platform they depend on. <br/> <br/> &bull; Resource logs are not collected until they are routed to a destination. <br/> &bull; The Activity Log exists on its own but can be routed to other locations. <br/>  <br/> Each Azure resource requires its own diagnostic setting, which defines the following criteria:  <br/>  <br/> &bull; Sources - The type of metric and log data to send to the destinations defined in the setting. The available types vary by resource type.  <br/> &bull; Destinations - One or more destinations to send to.  <br/>  <br/> ***A single diagnostic setting can define no more than one of each of the destinations.*** If you want to send data to more than one of a particular destination type (for example, two different Log Analytics workspaces), then create multiple settings. Each resource can have up to 5 diagnostic settings.|

### Monitor security by using Azure Security Center

| Term | Description |
|---|---|
| [Overview of Azure Security Center](https://azure.microsoft.com/en-us/pricing/details/defender-for-cloud) | xxx |
| [Monitor security with Azure Security Center](https://docs.microsoft.com/en-us/learn/modules/identify-threats-with-azure-security-center/5-analyze-recommendations) | xxx |
| [Centralized policy management](https://docs.microsoft.com/en-us/learn/modules/identify-threats-with-azure-security-center/4-policy-management) | xxx |
| [Configure security settings by using Azure Policy](https://docs.microsoft.com/en-us/azure/defender-for-cloud/tutorial-security-policy) | xxx |
| [Vulnerability scanner](https://docs.microsoft.com/en-us/azure/defender-for-cloud/deploy-vulnerability-assessment-vm) | xxx |
| [Enable JIT VM access](https://docs.microsoft.com/en-us/learn/modules/secure-vms-with-azure-security-center/3-exercise-jit-vm-access) | xxx |
| [Azure Security Center—demo](https://docs.microsoft.com/en-us/azure/defender-for-cloud/tutorial-protect-resources) | xxx |

### Monitor security by using Azure Sentinel

| Term | Description |
|---|---|
| [Azure Sentinel](https://docs.microsoft.com/en-us/azure/sentinel/overview)|Microsoft Sentinel is a scalable, cloud-native, security information event management (SIEM) and security orchestration automated response (SOAR) solution. Microsoft Sentinel delivers intelligent security analytics and threat intelligence across the enterprise, providing a single solution for alert detection, threat visibility, proactive hunting, and threat response.<br/><br/>  **Key features include:** <br/> &bull;  **Collect data at cloud scale** across all users, devices, applications, and infrastructure, both on-premises and in multiple clouds. <br/> &bull;  **Detect previously undetected threats**, and minimize false positives using Microsoft's analytics and unparalleled threat intelligence. <br/> &bull; **Investigate threats with artificial intelligence**, and hunt for suspicious activities at scale, tapping into years of cyber security work at Microsoft. <br/> &bull; **Respond to incidents rapidly** with built-in orchestration and automation of common tasks.|
| [Create and customize alerts in Azure Sentinel](https://docs.microsoft.com/en-us/azure/sentinel/detect-threats-built-in) | xxx |
| [Connect data sources](https://docs.microsoft.com/en-us/azure/sentinel/connect-data-sources) | xxx |
| [Create incidents from alerts](https://docs.microsoft.com/en-us/azure/sentinel/create-incidents-from-alerts) | xxx |
| [Investigate incidents with Azure Sentinel](https://docs.microsoft.com/en-us/azure/sentinel/investigate-cases) | xxx |
| [Configure a playbook for a security event](https://docs.microsoft.com/en-us/azure/sentinel/tutorial-respond-threats-playbook) | xxx |

### Configure security policies

| Term | Description |
|---|---|
| [Azure Policy](https://docs.microsoft.com/en-us/learn/modules/build-cloud-governance-strategy-azure/6-control-audit-resources-azure-policy) *and describe its use cases* | Azure Policy is a service in Azure that enables you to create, assign, and manage **policies that control or audit your resources**. These policies enforce different rules across all of your resource configurations so that those configurations stay compliant with corporate standards. <br/><br/> Common use cases for Azure Policy include implementing governance for resource consistency, regulatory compliance, security, cost, and management. Policy definitions for these common use cases are already available in your Azure environment as built-ins to help you get started. <br/><br/> Azure Policy enables you to define both individual policies and groups of related policies, known as ***initiatives***. Azure Policy evaluates your resources and highlights resources that aren't compliant with the policies you've created. Azure Policy can also prevent noncompliant resources from being created. <br/><br/>[Azure Policy Overview](https://docs.microsoft.com/en-us/azure/governance/policy/overview) |
| [Create and manage policies to enforce compliance](https://docs.microsoft.com/en-us/azure/governance/policy/tutorials/create-and-manage) | xxx |
| [Create a custom policy definition](https://docs.microsoft.com/en-us/azure/governance/policy/tutorials/create-custom-policy-definition) | xxx |
| [Deploy an Azure Policy—demo](https://docs.microsoft.com/en-us/azure/governance/policy/tutorials/create-and-manage) | xxx |
| [Azure Blueprint](https://docs.microsoft.com/en-us/learn/modules/build-cloud-governance-strategy-azure/) | xxx |
| [Create and assign blueprints](https://docs.microsoft.com/en-us/azure/governance/blueprints/create-blueprint-portal) | xxx |

## Secure data and applications (25–30%)

### Configure security for storage

| Term | Description |
|---|---|
| [Azure Storage overview](https://docs.microsoft.com/en-us/learn/modules/create-azure-storage-account/2-decide-how-many-storage-accounts-you-need) | xxx |
| [Authorization options for Azure Storage](https://docs.microsoft.com/en-us/azure/storage/common/authorize-data-access) | xxx |
| [Azure AD Storage Authentication](https://docs.microsoft.com/en-us/azure/storage/blobs/authorize-access-azure-active-directory) | xxx |
| [Shared access signature (SAS)](https://docs.microsoft.com/en-us/rest/api/storageservices/delegate-access-with-shared-access-signature) | xxx |
| [Create a user delegation SAS](https://docs.microsoft.com/en-us/rest/api/storageservices/create-user-delegation-sas) | xxx |
| [Azure AD Domain Services](https://docs.microsoft.com/en-us/azure/active-directory-domain-services/overview) | xxx |
| [Azure Storage Service Encryption (SSE)](https://docs.microsoft.com/en-us/learn/modules/azure-well-architected-security/5-encryption) |  XXX - **Azure Storage Service Encryption**  helps to protect data at rest by automatically encrypting before persisting it to Azure-managed disks, Azure Blob Storage, Azure Files, or Azure Queue Storage, and decrypts the data before retrieval. |
| [Configure encryption key management](https://docs.microsoft.com/en-us/learn/modules/azure-well-architected-security/5-encryption) | xxx |

### [Describe ways Azure encrypts data](https://docs.microsoft.com/en-us/learn/modules/describe-basic-security-capabilities-azure/7-describe-ways-azure-encrypts-data)
### Encryption on Azure

Microsoft Azure provides many different ways to secure your data, each depending on the service or usage required.

-   **Azure Storage Service Encryption**  helps to protect data at rest by automatically encrypting before persisting it to Azure-managed disks, Azure Blob Storage, Azure Files, or Azure Queue Storage, and decrypts the data before retrieval.
-   **Azure Disk Encryption**  helps you encrypt Windows and Linux IaaS virtual machine disks. Azure Disk Encryption uses the industry-standard BitLocker feature of Windows and the dm-crypt feature of Linux to provide volume encryption for the OS and data disks.
-   **Transparent data encryption (TDE)**  helps protect Azure SQL Database and Azure Data Warehouse against the threat of malicious activity. It performs real-time encryption and decryption of the database, associated backups, and transaction log files at rest without requiring changes to the application.

### Configure security for databases

| Term | Description |
|---|---|
| [Enable database auditing](https://docs.microsoft.com/en-us/learn/modules/create-security-baselines/5-create-an-azure-sql-database-baseline) | xxx |
| [Server-level vs. database-level auditing policy](https://docs.microsoft.com/en-us/azure/azure-sql/database/auditing-overview) | xxx |
| [Configure Azure SQL Database Advanced Threat Protection (ATP)](https://docs.microsoft.com/en-us/learn/modules/create-security-baselines/5-create-an-azure-sql-database-baseline) | xxx |
| [Advanced Data Security (ADS)](https://docs.microsoft.com/en-us/azure/azure-sql/database/azure-defender-for-sql) | xxx |
| [Advanced Threat Protection](https://docs.microsoft.com/en-us/learn/modules/protect-against-security-threats-azure/) | xxx |
| [SQL Database authentication](https://docs.microsoft.com/en-us/azure/azure-sql/database/logins-create-manage) | xxx |
| [Implement database encryption through transparent data encryption (TDE)](https://docs.microsoft.com/en-us/azure/azure-sql/database/transparent-data-encryption-tde-overview?tabs=azure-portal#manage-transparent-data-encryption) | XXX - **Transparent data encryption (TDE)**  helps protect Azure SQL Database and Azure Data Warehouse against the threat of malicious activity. It performs real-time encryption and decryption of the database, associated backups, and transaction log files at rest without requiring changes to the application. |
| [Configure Always Encrypted by using Azure Key Vault](https://docs.microsoft.com/en-us/azure/azure-sql/database/always-encrypted-azure-key-vault-configure) | xxx |

### What is Azure Key Vault?

Azure Key Vault is a centralized cloud service for storing your application secrets. Key Vault helps you control your applications' secrets by keeping them in a single, central location and by providing secure access, permissions control, and access logging capabilities. It's useful for different kinds of scenarios:

-   **Secrets management**. You can use Key Vault to store securely and tightly control access to tokens, passwords, certificates, Application Programming Interface (API) keys, and other secrets.
-   **Key management**. You can use Key Vault as a key management solution. Key Vault makes it easier to create and control the encryption keys used to encrypt your data.
-   **Certificate management**. Key Vault lets you provision, manage, and deploy your public and private Secure Sockets Layer/ Transport Layer Security (SSL/ TLS) certificates for Azure, and internally connected, resources more easily.
-   **Store secrets backed by hardware security modules (HSMs)**. The secrets and keys can be protected either by software or by FIPS 140-2 Level 2 validated HSMs.

### Configure and manage Azure Key Vault

| Term | Description |
|---|---|
| [Implement and configure Key Vault](https://docs.microsoft.com/en-us/learn/modules/manage-secrets-with-azure-key-vault/2-what-is-key-vault) | xxx |
| [Key rotation](https://docs.microsoft.com/en-us/azure/key-vault/secrets/tutorial-rotation-dual&tabs=azure-cli) | xxx |
| [Key Vault access and permissions](https://docs.microsoft.com/en-us/azure/key-vault/general/security-features) | xxx |
| [Management plane and access plane for Key Vault—demo](https://docs.microsoft.com/en-us/azure/key-vault/general/quick-create-portal) | xxx |


---
## Supplemental Links:
[Microsoft AZ-500 page that includes free training, skills measured PDF, and exam details](https://docs.microsoft.com/en-us/learn/certifications/exams/az-500)

[Microsoft Enterprise Skills Initiative Study Guide for AZ-500](https://aka.ms/ESIStudyGuide_AZ-900)

[WhizLabs AZ-500](https://www.whizlabs.com/microsoft-azure-certification-az-500)

---
<br/> &bull;
<br/> 4 spaces = &emsp; test
<br/> Pipe symbol: &#166;
<br/> Bold: **CanNotDelete**
<br/> Bold + Italitcs ***initiatives***
<br/> [Basic writing and formatting syntax](https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax)
<br/> :computer:	Read the referenced URL for additional information :computer: <br/>
